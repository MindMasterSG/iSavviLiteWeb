@model IEnumerable<SMSEntities.SMSDBEntities.Incidents>
@{
    ViewBag.Title = "GetIncidents";
    Layout = "~/Views/Shared/_LayoutTransactions.cshtml"; //"~/Views/Shared/_LayoutGuard.cshtml";
    var grid = new WebGrid(source: Model, rowsPerPage: 20, canPage: true);    
}


<script language="javascript" type="text/javascript">
    function getConfirm() {
        if (window.confirm('Are you sure!, you want to delete?'))
            return true;
        else
            return false;
    }
    function frmSubmit() {
        document.forms[0].submit();
    }
</script>
<div class="Transactions_cont">
    <div class="Displaying_cont_txt">
        @Session["SelectedFilter"]
        @Html.Hidden("sDay", @Session["StartDay"])
        @Html.Hidden("sMon", @Session["StartMonth"])
        @Html.Hidden("sYear", @Session["StartYear"])
        @Html.Hidden("eDay", @Session["EndDay"])
        @Html.Hidden("eMon", @Session["EndMonth"])
        @Html.Hidden("eYear", @Session["EndYear"])
    </div>
  @using (Html.BeginForm())
  { 
   <div class="transactions_right_cont">
                        <div class="search_txt">
                            search:
                        </div>
                        <div class="wat_box">
                            <input name="txtSearchString" id="txtSearchString" type="text" class="wat_box_input" onfocus="if(this.value == '') this.value = ''"
                                onblur="if(this.value == '') this.value = ' '" value=" " /></div>
                        <div class="search_img" onclick="frmSubmit();">
                        </div>
                    </div>
  }
</div>
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />

@*    <p>@Html.ActionLink("Add new incident", "AddIncident")</p>*@
@using (Html.BeginForm())
{
    <div>
        <table>
            <tr>
                <td style="width: 200px;" align="left">
                    @Html.ActionLink("Add new incident", "AddIncident")
                </td>
                <td style="width: 600px;" align="left">
                    <select id="startdate" name="startdate">
                        <option selected="selected" value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                    </select>
                    <select id="startmonth" name="startmonth">
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                    <select id="startyear" name="startyear">
                        <option value="2013">2013</option>
                        <option value="2014">2014</option>
                        <option value="2015">2015</option>
                        <option value="2016">2016</option>
                        <option value="2017">2017</option>
                        <option value="2018">2018</option>
                        <option value="2019">2019</option>
                        <option value="2020">2020</option>
                        <option value="2021">2021</option>
                        <option value="2022">2022</option>
                        <option value="2023">2023</option>
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                    </select>
                    to  
                    <select id="enddate" name="enddate">
                        <option selected="selected" value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                    </select>
                    <select id="endmonth" name="endmonth">
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                    <select id="endyear" name="endyear">
                        <option value="2013">2013</option>
                        <option value="2014">2014</option>
                        <option value="2015">2015</option>
                        <option value="2016">2016</option>
                        <option value="2017">2017</option>
                        <option value="2018">2018</option>
                        <option value="2019">2019</option>
                        <option value="2020">2020</option>
                        <option value="2021">2021</option>
                        <option value="2022">2022</option>
                        <option value="2023">2023</option>
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                    </select>
                    <button name="button" style="width: 40px;" value="Go">
                        Go</button>
                </td>
                <td style="width: 150px;" align="left">
                    <button class="btnAddUpdate" name="button" value="Download">
                        Download</button>
                </td>
                @*<td style="width: 50px;" align="left">
                    <input type="image" src="@Url.Content("~/Content/images/print_icon.gif")" alt="Download" onclick="window.print();" />
                </td>*@
            </tr>
        </table>
    </div>
}

    @grid.GetHtml(
    fillEmptyRows: true,
         alternatingRowStyle: "transactions_bg_cont_2_withimage",
              headerStyle: "transactions_bg_cont",
                      rowStyle: "transactions_bg_cont_withimage",
         footerStyle: "total_right_cont_txt",
    mode: WebGridPagerModes.All,
    numericLinksCount: 5,
    firstText: "<<",
    lastText: ">>",
    columns: new [] {
        grid.Column("natureofincident", "Incident type", canSort: true, style:"normaltext"),
        grid.Column("LocationName","Location", canSort: true, style: "normaltext"),
        grid.Column("dateofincident","Incident Date", canSort: true, style: "normaltext"),
        grid.Column("briefdescription","Description", canSort: true, style: "text400"),
        
        grid.Column("",format: 
            @*@<text><img src="@Url.Content(String.Format("{0}", @item.snapshotpath))" alt='image' width='90' height='90' /></text>*@
            @<text>
            @if (@item.snapshotpath != null && @item.snapshotpath !="" ) { <img src="@Url.Content(String.Format("{0}", @item.snapshotpath))" alt='image' width='80' height='75' />}
            </text>
        ),grid.Column("", 
                    header: "",
                    format: @<text>
                                @Html.ActionLink("Edit", "EditIncident", new { id = item.incidentid })
                                |
                                @Html.ActionLink("Delete", "RemoveIncident", new { id = item.incidentid }, new { onclick = "return getConfirm();" })
                            </text>
        )
})
<div class="total_main_bg_cont">
             <div class="total_left_cont_txt">Total Incidents found:<strong> @grid.TotalRowCount.ToString()</strong></div>
             </div>

                      <script type="text/javascript" language="javascript">

        //Get select object
        var sDate = document.getElementById("startdate");
        var sMon = document.getElementById("startmonth");
        var sYear = document.getElementById("startyear");
        var eDate = document.getElementById("enddate");
        var eMonth = document.getElementById("endmonth");
        var eYear = document.getElementById("endyear");

        //Set selected
        setSelectedValue(sDate, document.getElementById("sDay").value);
        setSelectedMonthValue(sMon, document.getElementById("sMon").value);
        setSelectedValue(sYear, document.getElementById("sYear").value);
        setSelectedValue(eDate, document.getElementById("eDay").value);
        setSelectedMonthValue(eMonth, document.getElementById("eMon").value);
        setSelectedValue(eYear, document.getElementById("eYear").value);

        function setSelectedValue(selectObj, valueToSet) {
            for (var i = 0; i < selectObj.options.length; i++) {
                if (selectObj.options[i].text == valueToSet) {
                    selectObj.options[i].selected = true;
                    return;
                }
            }
        }
        function setSelectedMonthValue(selectObj, valueToSet) {
            for (var i = 0; i < selectObj.options.length; i++) {
                if (selectObj.options[i].value == valueToSet) {
                    selectObj.options[i].selected = true;
                    return;
                }
            }
        }
                      </script>